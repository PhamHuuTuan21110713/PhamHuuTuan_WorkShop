<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.127.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Create the FlightReservation Controller class :: Amazon Q Developer Workshop - Build enterprise Java application with Spring Boot</title>

    
    <link href="/css/nucleus.css?1726247042" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1726247042" rel="stylesheet">
    <link href="/css/hybrid.css?1726247042" rel="stylesheet">
    <link href="/css/featherlight.min.css?1726247042" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1726247042" rel="stylesheet">
    <link href="/css/auto-complete.css?1726247042" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1726247042" rel="stylesheet">
    <link href="/css/theme.css?1726247042" rel="stylesheet">
    <link href="/css/hugo-theme.css?1726247042" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1726247042" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1726247042"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2-module-1-find-flights-api/11-flight-reservations-controller-classes-module1/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1726247042"></script>
<script type="text/javascript" src="/js/auto-complete.js?1726247042"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1726247042"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-config-environment/" title="Setup Development Environment" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/">
           <b> 1. </b> Setup Development Environment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/1-connecting-ec2/" title="Connect to Development EC2" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/1-connecting-ec2/">
           <b> 1.1 </b> Connect to Development EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/2-config-cognito/" title="Set up Cognito" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/2-config-cognito/">
           <b> 1.2 </b> Set up Cognito
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/3-configsns-to-send-email/" title="Configure SNS Topic to send Emails" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/3-configsns-to-send-email/">
           <b> 1.3 </b> Configure SNS Topic to send Emails
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/4-config-mysql-to-connect-rds/" title="Configure MySQL Workbench to connect to RDS" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/4-config-mysql-to-connect-rds/">
           <b> 1.4 </b> Configure MySQL Workbench to connect to RDS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/5-openning-project-intelij/" title="Open the prompt project in IntelliJ IDE" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/5-openning-project-intelij/">
           <b> 1.5 </b> Open the prompt project in IntelliJ IDE
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-config-environment/6-setup-amazonq/" title="Setup Amazon Q Developer" class="dd-item 
        
        
        
        ">
      <a href="/1-config-environment/6-setup-amazonq/">
           <b> 1.6 </b> Setup Amazon Q Developer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/" title="Module 1 - Find Flights API" class="dd-item 
        parent
        
        
        ">
      <a href="/2-module-1-find-flights-api/">
           <b> 2. </b> Module 1 - Find Flights API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/1-table-database-module1/" title="Setup the database tables for Module 1" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/1-table-database-module1/">
           <b> 2.1 </b> Setup the database tables for Module 1
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/2-model-classes-module1/" title="Build the model classes" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/2-model-classes-module1/">
           <b> 2.2 </b> Build the model classes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/3-dto-module1/" title="Create Data Transfer Object (DTO)" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/3-dto-module1/">
           <b> 2.3 </b> Create Data Transfer Object (DTO)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/4-jpa-repository-interface-module1/" title="Build JPA Repository Interface" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/4-jpa-repository-interface-module1/">
           <b> 2.4 </b> Build JPA Repository Interface
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/5-config-datasource-module1/" title="Data Source configuration" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/5-config-datasource-module1/">
           <b> 2.5 </b> Data Source configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/6-service-classes-module1/" title="Build the service class" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/6-service-classes-module1/">
           <b> 2.6 </b> Build the service class
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/7-unit-test-repository-classes-module1/" title="Unit Testing of the repository classes" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/7-unit-test-repository-classes-module1/">
           <b> 2.7 </b> Unit Testing of the repository classes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/8-unit-test-service-classes-module1/" title="Unit Test the service class" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/8-unit-test-service-classes-module1/">
           <b> 2.8 </b> Unit Test the service class
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/9-get-cognito-pkeys-module1/" title="Get Cognito public keys" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/9-get-cognito-pkeys-module1/">
           <b> 2.9 </b> Get Cognito public keys
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/10-exception-handler-module1/" title="Build Exception Handler to handle Authentication Exceptions" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/10-exception-handler-module1/">
           <b> 2.10 </b> Build Exception Handler to handle Authentication Exceptions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/11-flight-reservations-controller-classes-module1/" title="Create the FlightReservation Controller class" class="dd-item 
        
        active
        
        ">
      <a href="/2-module-1-find-flights-api/11-flight-reservations-controller-classes-module1/">
           <b> 2.11 </b> Create the FlightReservation Controller class
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-module-1-find-flights-api/12-unit-test-find-flights-api/" title="Unit Test Find Flights API" class="dd-item 
        
        
        
        ">
      <a href="/2-module-1-find-flights-api/12-unit-test-find-flights-api/">
           <b> 2.12 </b> Unit Test Find Flights API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/" title="Module 2 - Flight Reservation API" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/">
           <b> 3. </b> Module 2 - Flight Reservation API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/1-table-database-module2/" title="Create Tables and load data" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/1-table-database-module2/">
           <b> 3.1 </b> Create Tables and load data
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/2-model-classes-module2/" title="Build the model layer" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/2-model-classes-module2/">
           <b> 3.2 </b> Build the model layer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/3-jpa-repository-module2/" title="Build the JPA Repository" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/3-jpa-repository-module2/">
           <b> 3.3 </b> Build the JPA Repository
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/4-unit-test-repository-classes-module2/" title="Unit test the Repository classes" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/4-unit-test-repository-classes-module2/">
           <b> 3.4 </b> Unit test the Repository classes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/5-handle-bussiness-exceptions-module2/" title="Handle Business Exceptions" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/5-handle-bussiness-exceptions-module2/">
           <b> 3.5 </b> Handle Business Exceptions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/6-service-classes-module2/" title="Build the service class" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/6-service-classes-module2/">
           <b> 3.6 </b> Build the service class
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/7-unit-test-flightbooking-service-classes/" title="Unit Test FlightBooking service class" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/7-unit-test-flightbooking-service-classes/">
           <b> 3.7 </b> Unit Test FlightBooking service class
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/8-dto-reservation-details/" title="Create DTO Reservation Details" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/8-dto-reservation-details/">
           <b> 3.8 </b> Create DTO Reservation Details
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/9-book-flight-api-controller/" title="Create the book flight API Controller" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/9-book-flight-api-controller/">
           <b> 3.9 </b> Create the book flight API Controller
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-module-2-flight-reservation-api/10-unit-test-reserve-flight-api/" title="Unit Testing of the reserve Flight API" class="dd-item 
        
        
        
        ">
      <a href="/3-module-2-flight-reservation-api/10-unit-test-reserve-flight-api/">
           <b> 3.10 </b> Unit Testing of the reserve Flight API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-testing-api-with-postman/" title="Test API with Postman" class="dd-item 
        
        
        
        ">
      <a href="/4-testing-api-with-postman/">
           <b> 4. </b> Test API with Postman
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-clean-up/" title="Clean up" class="dd-item 
        
        
        
        ">
      <a href="/5-clean-up/">
           <b> 5. </b> Clean up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://aws.amazon.com/blogs"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/2-module-1-find-flights-api/11-flight-reservations-controller-classes-module1/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/2-module-1-find-flights-api/11-flight-reservations-controller-classes-module1/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>10-09-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Phạm Tuấn</a>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Home</a> > <a href='/2-module-1-find-flights-api/'>Module 1 - Find Flights API</a> > Create the FlightReservation Controller class
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Create the FlightReservation Controller class
            </h1>
          

        



	<ul>
<li>You will build the controller class for exposing the &ldquo;getFlightDetails&rdquo; API Amazon Q Developer prompts to build the API Controller:</li>
<li>Open the FlightReservation.java under the src/main/java/com.airlines.catalog/controller folder. Add the below imports and starter code for the class.</li>
</ul>
<div style="background-color: #e7f3fe; padding: 20px;" class="callout callout-info">
    <strong>Code</strong>
    <p>

import java.util.List;<br>

import com.airlines.catalog.dto.FlightDetails;<br>

import com.airlines.catalog.exception.AuthenticationException;<br>

import com.airlines.catalog.repository.AirportRepository;<br>

import com.airlines.catalog.repository.FlightRepository;<br>

import com.airlines.catalog.service.FlightDetailsService;<br>

import com.auth0.jwt.JWT;<br>

import com.auth0.jwt.JWTVerifier;<br>

import com.auth0.jwt.algorithms.Algorithm;<br>

import com.auth0.jwt.interfaces.DecodedJWT;<br>

import org.springframework.beans.factory.annotation.Autowired;<br>

import org.springframework.beans.factory.annotation.Value;<br>

import org.springframework.http.HttpStatus;<br>

import org.springframework.http.ResponseEntity;<br>

import org.springframework.web.bind.annotation.GetMapping;<br>

import org.springframework.web.bind.annotation.RequestHeader;<br>

import org.springframework.web.bind.annotation.RequestParam;<br>

import org.springframework.web.bind.annotation.RestController;<br>

@RestController<br>

public class FlightReservation {<br>

@Autowired<br>

FlightRepository flightresultsRepository;<br>

@Autowired<br>

AirportRepository airportresultsRepository;<br>

@Autowired<br>

FlightDetailsService FlightDetailsService;<br>

@Value("${cognito.userpool.id}")<br>

private String cognitoUserPoolId;<br>

@Value("${aws.region}")<br>

private String awsRegion;<br>

@Value("${sns.arn}")<br>

private String snsTopicArn;<br>

}

---

</p>
</div>

<p><img alt="image.png" src="/images/module_1/reservation_controller/image.png"></p>
<ul>
<li>Under the FlightReservation class, use the following prompt to create the verifyToken method. This method will use the AuthenticationException handler we created earlier.</li>
</ul>
<div style="background-color: #e7f3fe; padding: 20px;" class="callout callout-info">
    <strong>Prompt</strong>
    <p>

Create a private method verifyToken to verify JWT token with input parameters asCognito user pool id, AWS region and token string. Function returns a Boolean. Construct the Cognito well known url and then verify the token using RSA Algorithm. Get the public key from AwsCognitoKeyProvider. Catch all Exception throw new authenticationException

</p>
</div>

<p><img alt="image.png" src="/images/module_1/reservation_controller/image_1.png"></p>
<ul>
<li>If there are any errors, select the whole method, right click and choose Send to Amazon Q and then Fix Code. This well give you the fixed code in the chat window which you can copy and then replace the function generated earlier.</li>
<li>Use the below prompt to create getFlightDetails controller which will expose REST API to find the flights.</li>
</ul>
<div style="background-color: #e7f3fe; padding: 20px;" class="callout callout-info">
    <strong>Prompt</strong>
    <p>

Create a rest controller getFlightDetails to get flight details with HTTP GET Method, /flight path and request parameters as departure date, departure airport code and arrival airport code JWT Token in the Authorization Header.
Rest controller returns a ResponseEntity of string.

</p>
</div>

<p><img alt="image.png" src="/images/module_1/reservation_controller/image_2.png"></p>
<ul>
<li>Inside the getFlightDetails method use the below prompt to implement the API logic
<div style="background-color: #e7f3fe; padding: 20px;" class="callout callout-info">
    <strong>Prompt</strong>
    <p>
    /* Call verifyToken method, catch authentication exception and return the responseEntity
    if token is valid and call the findFlights method in FlightDetailsService class
    with input parameters  departure date, departure airport code,
    arrival airport code, flightResultsRepository and airportResultsRepository.
    If flights are found return the list of flights otherwise return "No flights found".
    If authentication failed the return "Authentication failed" and HTTP status of forbidden
    */
</p>
</div>
</li>
<li>Current complete code for the <strong>FlightReservation</strong> class (we will continue to update this class in <strong>Module 2</strong> )</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#f92672">package</span> com.airlines.catalog.controller;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.airlines.catalog.dto.FlightDetails;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.airlines.catalog.exception.AuthenticationException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.airlines.catalog.repository.AirportRepository;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.airlines.catalog.repository.FlightRepository;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.airlines.catalog.service.FlightDetailsService;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.auth0.jwt.JWT;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.auth0.jwt.JWTVerifier;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.auth0.jwt.algorithms.Algorithm;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.auth0.jwt.interfaces.DecodedJWT;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Value;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.http.HttpStatus;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.http.ResponseEntity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.GetMapping;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RequestHeader;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RequestParam;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RestController;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FlightReservation</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span>    FlightRepository flightresultsRepository;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span>    AirportRepository airportresultsRepository;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span>    FlightDetailsService FlightDetailsService;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Value</span>(<span style="color:#e6db74">&#34;${cognito.userpool.id}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String cognitoUserPoolId;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Value</span>(<span style="color:#e6db74">&#34;${aws.region}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String awsRegion;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Value</span>(<span style="color:#e6db74">&#34;${sns.arn}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String snsTopicArn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Create a private method verifyToken to verify JWT token with input parameters as
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Cognito user pool id, AWS region and token string. Function returns a Boolean.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Construct the Cognito well known url and then verify the token using RSA Algorithm.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    catch all Exception throw new authenticationException.*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Boolean <span style="color:#a6e22e">verifyToken</span>(String cognitoUserPoolId, String awsRegion, String token) <span style="color:#66d9ef">throws</span> AuthenticationException {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            String cognitoWellKnownUrl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://cognito-idp.&#34;</span> <span style="color:#f92672">+</span> awsRegion <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;.amazonaws.com/&#34;</span> <span style="color:#f92672">+</span> cognitoUserPoolId <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/.well-known/jwks.json&#34;</span>;
</span></span><span style="display:flex;"><span>            Algorithm algorithm <span style="color:#f92672">=</span> Algorithm.<span style="color:#a6e22e">RSA256</span>(<span style="color:#66d9ef">new</span> AwsCognitoRSAKeyProvider(cognitoWellKnownUrl));
</span></span><span style="display:flex;"><span>            JWTVerifier verifier <span style="color:#f92672">=</span> JWT.<span style="color:#a6e22e">require</span>(algorithm).<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>            DecodedJWT decodedJWT <span style="color:#f92672">=</span> verifier.<span style="color:#a6e22e">verify</span>(token);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> AuthenticationException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Create a rest controller getFlightDetails to get flight details with HTTP GET Method ,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   /flight path and request parameters as departure date, departure airport code and arrival airport code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   JWT Token in the Authorization Header.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   Rest controller returns a ResponseEntity of string.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@GetMapping</span>(<span style="color:#e6db74">&#34;/flight&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getFlightDetails</span>(<span style="color:#a6e22e">@RequestParam</span>(<span style="color:#e6db74">&#34;departureDate&#34;</span>) String departureDate,
</span></span><span style="display:flex;"><span>                                                   <span style="color:#a6e22e">@RequestParam</span>(<span style="color:#e6db74">&#34;departureAirportCode&#34;</span>) String departureAirportCode,
</span></span><span style="display:flex;"><span>                                                   <span style="color:#a6e22e">@RequestParam</span>(<span style="color:#e6db74">&#34;arrivalAirportCode&#34;</span>) String arrivalAirportCode,
</span></span><span style="display:flex;"><span>                                                   <span style="color:#a6e22e">@RequestHeader</span>(<span style="color:#e6db74">&#34;Authorization&#34;</span>) String authorization) <span style="color:#66d9ef">throws</span> AuthenticationException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/* Call verifyToken method, catch authentication exception and return the responseEntity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    if token is valid and call the findFlights method in FlightDetailsService class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    with input parameters  departure date, departure airport code,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    arrival airport code, flightResultsRepository and airportResultsRepository.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    If flights are found return the list of flights otherwise return &#34;No flights found&#34;.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    If authentication failed the return &#34;Authentication failed&#34; and HTTP status of forbidden
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (verifyToken(cognitoUserPoolId, awsRegion, authorization)) {
</span></span><span style="display:flex;"><span>                List<span style="color:#f92672">&lt;</span>FlightDetails<span style="color:#f92672">&gt;</span> flights <span style="color:#f92672">=</span> FlightDetailsService.<span style="color:#a6e22e">findFlights</span>(departureDate, departureAirportCode, arrivalAirportCode, flightresultsRepository, airportresultsRepository);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (flights.<span style="color:#a6e22e">size</span>() <span style="color:#f92672">&gt;</span> 0) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;</span>(flights.<span style="color:#a6e22e">toString</span>(), HttpStatus.<span style="color:#a6e22e">OK</span>);
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;</span>(<span style="color:#e6db74">&#34;No flights found&#34;</span>, HttpStatus.<span style="color:#a6e22e">OK</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;</span>(<span style="color:#e6db74">&#34;Authentication failed&#34;</span>, HttpStatus.<span style="color:#a6e22e">FORBIDDEN</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">catch</span> (AuthenticationException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;</span>(e.<span style="color:#a6e22e">getResponseEntity</span>().<span style="color:#a6e22e">getBody</span>().<span style="color:#a6e22e">toString</span>(), HttpStatus.<span style="color:#a6e22e">UNAUTHORIZED</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>




<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/2-module-1-find-flights-api/10-exception-handler-module1/" title="Build Exception Handler to handle Authentication Exceptions"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/2-module-1-find-flights-api/12-unit-test-find-flights-api/" title="Unit Test Find Flights API" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1726247042"></script>
    <script src="/js/perfect-scrollbar.min.js?1726247042"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1726247042"></script>
    <script src="/js/jquery.sticky.js?1726247042"></script>
    <script src="/js/featherlight.min.js?1726247042"></script>
    <script src="/js/highlight.pack.js?1726247042"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1726247042"></script>
    <script src="/js/learn.js?1726247042"></script>
    <script src="/js/hugo-learn.js?1726247042"></script>

    <link href="/mermaid/mermaid.css?1726247042" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1726247042"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
